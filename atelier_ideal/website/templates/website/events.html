{% extends 'website/base.html' %}
{% load static %}

{% block content %}
  <section class="events">
    <div class="columns">
      <div class="column is-narrow form-container">
        <form method="get">
          <div class="field">
            <label class="label is-small">&#192; partir du</label>
            <div class="control">
              <input name="date" class="input" id="datetime" type="date" default="Null">
            </div>
          </div>

          <div class="field">
            <label class="label is-small">Type d'évènement</label>
            <div class="control">
              {% if eventTypes %}
                <div class="select">
                  <select class="input" name="type" default="Tous">
                    <option>Tous</option>
                    {% for eventType in eventTypes %}
                      <option>{{ eventType.name }}</option>
                    {% endfor %}
                  </select>
                </div>
              {% endif %}
            </div>
          </div>

          <div class="field">
            <label class="label is-small">Recherche</label>
            <div class="control">
              <input type="text" class="input" name="keyword" placeholder="Mot clé">
            </div>
          </div>

          <div class="control has-text-centered">
            <button type="submit" class="button is-primary">Filtrer</button>
          </div>
        </form>
      </div>
      <div class="column">
        {% if events %}
          {% for event in events %}
          <div class="event card">
            <div class="card-content">
              <div class="media">
                {% if event.photo %}
                  <div class="media-left">
                    <figure class="image">
                      <img src={{event.photo.url}} alt="Placeholder image">
                    </figure>
                  </div>
                {% endif %}
                <div class="media-content">
                  <p class="title is-4">{{ event.title }}</p>
                  <p class="subtitle is-6">{{ event.subtitle }}</p>
                  <span>
                    <span class="icon">
                      <i class="far fa-calendar-alt"></i>
                    </span>
                    <time datetime="{{ event.event_date }}">{{ event.event_date }}</time>
                  </span>
                </div>
              </div>
              <hr>
              <div class="content has-text-justified">
                <article>{{ event.description | safe | truncatewords_html:100 }}</article>
                <br>
                <span class="link-container">
                  <a href="{% url 'website:event-detail' event.pk %}">Voir les détails ...</a>
                </span>
              </div>
            </div>
          </div>
<!--             <div class="box">
              <p class="title is-4">{{ event.title }}</p>
              <p class="subtitle is-6">{{ event.subtitle }}</p>
              <span>
                <time datetime="{{ event.event_date }}">{{ event.event_date }}</time>
              </span>
              <hr>
              <div class="content">
                <div class="media">
                  <div class="media-left">
                    {% if event.photo %}
                      <div class="card-image">
                        <figure class="image">
                          <img src={{event.photo.url}} alt="Placeholder image">
                        </figure>
                      </div>
                    {% endif %}
                  </div>
                  <div class="media-content">
                    <article>{{ event.description | safe | truncatewords_html:100 }}</article>
                    <br>
                    <span>
                      <a href="{% url 'website:event-detail' event.pk %}">Voir les détails ...</a>
                    </span>
                  </div>
                </div>
              </div>
            </div> -->
          {% endfor %}
        {% else %}
          <span>Aucun évènement ne correspond à votre recherche</span>
        {% endif %}
      </div>
    </div>
  </section>

<script type="text/javascript">
  document.getElementById('datetime').valueAsDate = new Date();
  const inputs = document.querySelectorAll('.input');
  inputs.forEach(input => input.addEventListener('change', () => console.log('caca boudin')))
  // fetch()
</script>
<link rel="stylesheet" type="text/css" href="{% static 'website/css/events.css' %}">

{% endblock %}







<!-- {% load static %}

<div class="container">
  <div class="row">
    <div class="col-lg-12 text-center">
      <h2 class="section-heading">A venir ce mois</h2>
      <h3 class="section-subheading text-muted">Lorem ipsum dolor sit amet consectetur.</h3>
    </div>
  </div>
  <div class="row">
    <div class="col-lg-12">
      <ul class="timeline">
        <li>
          <div class="timeline-image">
            <img class="rounded-circle img-fluid" src="{% static 'website/img/about/1.jpg' %}" alt="">
          </div>
          <div class="timeline-panel">
            <div class="timeline-heading">
              <h4>2009-2011</h4>
              <h4 class="subheading">Our Humble Beginnings</h4>
            </div>
            <div class="timeline-body">
              <p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sunt ut voluptatum eius sapiente, totam reiciendis temporibus qui quibusdam, recusandae sit vero unde, sed, incidunt et ea quo dolore laudantium consectetur!</p>
            </div>
          </div>
        </li>
        <li class="timeline-inverted">
          <div class="timeline-image">
            <img class="rounded-circle img-fluid" src="{% static 'website/img/about/2.jpg' %}" alt="">
          </div>
          <div class="timeline-panel">
            <div class="timeline-heading">
              <h4>March 2011</h4>
              <h4 class="subheading">An Agency is Born</h4>
            </div>
            <div class="timeline-body">
              <p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sunt ut voluptatum eius sapiente, totam reiciendis temporibus qui quibusdam, recusandae sit vero unde, sed, incidunt et ea quo dolore laudantium consectetur!</p>
            </div>
          </div>
        </li>
        <li>
          <div class="timeline-image">
            <img class="rounded-circle img-fluid" src="{% static 'website/img/about/3.jpg' %}" alt="">
          </div>
          <div class="timeline-panel">
            <div class="timeline-heading">
              <h4>December 2012</h4>
              <h4 class="subheading">Transition to Full Service</h4>
            </div>
            <div class="timeline-body">
              <p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sunt ut voluptatum eius sapiente, totam reiciendis temporibus qui quibusdam, recusandae sit vero unde, sed, incidunt et ea quo dolore laudantium consectetur!</p>
            </div>
          </div>
        </li>
        <li class="timeline-inverted">
          <div class="timeline-image">
            <img class="rounded-circle img-fluid" src="{% static 'website/img/about/4.jpg' %}" alt="">
          </div>
          <div class="timeline-panel">
            <div class="timeline-heading">
              <h4>July 2014</h4>
              <h4 class="subheading">Phase Two Expansion</h4>
            </div>
            <div class="timeline-body">
              <p class="text-muted">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Sunt ut voluptatum eius sapiente, totam reiciendis temporibus qui quibusdam, recusandae sit vero unde, sed, incidunt et ea quo dolore laudantium consectetur!</p>
            </div>
          </div>
        </li>
        <li class="timeline-inverted">
          <div class="timeline-image">
            <h4>Be Part
              <br>Of Our
              <br>Story!</h4>
          </div>
        </li>
      </ul>
    </div>
  </div>
</div> -->